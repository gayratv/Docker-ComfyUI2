#!/bin/bash
# 1. PyTorch и CUDA 12.8 (Nightly-версия)
pip install --pre torch torchvision torchaudio \
  --index-url https://download.pytorch.org/whl/nightly/cu128 \
  --extra-index-url https://pypi.nvidia.com  # [[4]]

pip install \
  # Core dependencies
  Pillow>=10.3.0 \  # [[6]]
  opencv-python-headless>=4.9.0.80 \  # Для совместимости с albumentations [[5]]
  scipy>=1.11.4 \  # [[6]]
  numpy==1.26.4 \  # [[6]]
  einops>=0.7.0 \  # [[7]]
  accelerate>=0.26.0 \  # [[8]]
  huggingface_hub>=0.23.4 \  # [[9]]
  transformers>=4.45.0 \  # [[10]]
  diffusers>=0.31.0 \  # [[11]]
  safetensors>=0.4.2 \  # [[12]]
  bitsandbytes>=0.41.1 \  # [[13]]
  xformers==0.0.18 \  # Проверьте совместимость с CUDA 12.8 [[4]]
  onnxruntime-gpu \  # [[14]]

  # Hugging Face и API
  PyGithub \  # [[15]]
  openai>=1.0.0 \  # [[16]]
  replicate \  # [[17]]
  google-generativeai \  # [[18]]
  zhipuai \  # [[19]]

  # Обработка изображений
  albumentations \  # Требует OpenCV >=4.9.0 [[5]]
  kornia>=0.7.1 \  # [[21]]
  imageio-ffmpeg>=0.4.0 \  # [[22]]
  rembg[gpu] \  # [[14]]
  segment-anything \  # [[23]]
  transparent-background \  # [[24]]

  # Утилиты и инструменты
  tqdm>=4.62.0 \  # [[25]]
  requests>=2.31.0 \  # [[26]]
  aiohttp>=3.11.8 \  # [[27]]
  psutil \  # [[28]]
  typer \  # [[29]]
  rich \  # [[30]]
  loguru \  # [[31]]
  pyyaml \  # [[32]]
  configparser>=5.0.0 \  # [[33]]
  dill \  # [[34]]
  filelock>=3.0.12 \  # [[35]]
  json-repair \  # [[36]]
  prettytable \  # [[37]]
  qrcode \  # [[38]]
  wget \  # [[39]]
  zip-file36>=0.1.3 \  # [[40]]

  # Глубокое обучение и эксперименты
  deepspeed==0.4.0 \  # [[41]]
  peft>=0.12.0 \  # [[42]]
  loralib>=0.1.2 \  # [[43]]
  timm==0.4.12 \  # [[44]]
  torchmetrics==0.10.3 \  # [[45]]
  torchsde \  # [[46]]

  # Аудио и видео
  faster_whisper \  # [[47]]
  soundfile>=0.12.1 \  # [[48]]
  av \  # [[49]]

  # Дополнительные зависимости
  GitPython \  # [[50]]
  gradio>=3.0.0 \  # [[51]]
  uv \  # [[52]]
  fal-client \  # [[53]]
  submitit \  # [[54]]
  redis \  # [[55]]
  boto3==1.34.86 \  # [[56]]
  matrix-client==0.4.0 \  # [[57]]
  mediapipe \  # [[58]]
  svglib \  # [[59]]
  trimesh>=4.0.5 \  # [[60]]
  colour-science \  # [[61]]
  addict \  # [[62]]
  omegaconf>=2.3.0 \  # [[63]]
  hydra-core>=1.3.2 \  # [[64]]
  numba \  # [[65]]
  mypy \  # [[66]]
  pytest>=7.8.0 \  # [[67]]
  pytest-aiohttp \  # [[68]]
  pytest-asyncio \  # [[69]]
  yapf \  # [[70]]
  gguf>=0.13.0 \  # [[71]]
  clip-interrogator==0.6.0 \  # [[72]]
  color-matcher \  # [[73]]
  blind-watermark \  # [[74]]
  blobfile \  # [[75]]
  ftfy \  # [[76]]
  fvcore \  # [[77]]
  scenedetect[opencv-headless] \  # [[78]]
  pymatting \  # [[79]]
  pycryptodome>=3.15.0 \  # [[80]]
  pyOpenSSL \  # [[81]]
  pyarrow \  # [[82]]
  pycocoevalcap \  # [[83]]
  pycocotools \  # [[84]]
  sentencepiece \  # [[85]]
  tokenizers>=0.13.3 \  # [[86]]
  torchscale==0.2.0 \  # [[87]]
  ultralytics>=8.2.0 \  # [[88]]
  watchdog \  # [[89]]
  scikit-learn \  # [[90]]
  torchvision>=0.10.0 \  # [[91]]
  torchaudio>=0.10.0 \  # [[92]]

  # Специфические пакеты из вашего списка
  comfyui-frontend-package==1.12.14 \  # [[93]]
  git+https://github.com/openai/swarm.git \  # [[94]]
  git+https://github.com/shadowcz007/SenseVoice-python.git \  # [[95]]
  --extra-index-url https://pypi.nvidia.com  # Для CUDA-зависимостей [[4]]

rm -rf ~/.cache/pip